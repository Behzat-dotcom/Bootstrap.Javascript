<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <input type="text" id="price" placeholder="baha girin!!!">
    <input type="text" id="tax" value="20">
    <button id="hesapla"> Hesapla</button>
    <pre id="resultData"></pre>

    <script>
       // Sorgu yapan kısa fonksiyon
       // String veya sayıyı sayıya çeviren fonksiyon
       // Sayıya çeviren fonksiyon, kendisini kullanmadan öncendefa burada görebiliriz.
       const el=(s)=>document.querySelector(s);
        const toNum=(s)=>{
            const n=toNumberString(s);
            return Number.isFinite(n) ? n : NaN;
        }

        function toNumberString(a){
            if(typeof a!=="string") return Number(a);
            const t=a.trim().replace(",",".");
            return t===""? NaN : Number(a);
        }

        el("#hesapla").addEventListener("click", ()=>{
            const price=toNum(el("#price").value); // inputdan gelen data elimizde
            const tax=toNum (el("#tax").value); //inputdan gelen data elimizde
            if(!Number.isFinite(price) || !Number.isFinite(tax)) {
                el("#resultData").textContent="Geçererli sayı yaz";
                return;
            }
            const taxSummery=price * tax/100;
            const total=price + taxSummery;
            el("#resultData").textContent=`VERGI ${taxSummery.toFixed(2)} | Toplam: ${total.toFixed(2)}`;
        }

        );
       
    
        // Ekstra: toNumberString fonksiyonunun test edilmesi
        var a =20.02;
        console.log("Test a:", a);
        console.log("toNumberString(a):", toNumberString(a));

        // 'toNumberString' fonksiyonunun düzeltilmiş versiyonuna dikkat edin, orijinal kodda iki defa tanımlanmış
        function toNumberString(a){
            console.log(`Düzeltilmiş toNumberString'a giriş:`, a);
            if (typeof a !== "string") {
                const numberA = Number(a);
                console.log(`` + a + `sayısal değil, Number'a çevrildi:`, numberA);
                return numberA;
            }
            const t=a.trim().replace(",",".");
            console.log(`Temizlenmiş ve dönüştürülmüş string:`, t);
            return t==="" ? NaN : Number(t);
        }

        // toBool fonksiyonunun test edilmesi
        var v=8;
        console.log("V değeri:", v);
        console.log("toBool(v):", toBool(v));

        function toBool(v){
            console.log(`toBool'e giriş, v:`, v);
            if (typeof v==="boolean") {
                console.log(`v boolean tipinde:`, v);
                return v;
            }
            if (typeof v!=="string") {
                const boolV = Boolean(v);
                console.log(`v string değil, Boolean'a çevrildi:`, boolV);
                return boolV;
            }
            const t=v.trim().toLowerCase();
            console.log(`İşlenmiş string:`, t);
            const result = t==="true" || t==="1" || t==="on" || t==="yes";
            console.log(`Boolean dönen sonuç:`, result);
            return result;
        }

        // Toplam nesnesi, toPrimitive ve String dönüşümünü görebilmek için
        const toplam={
            value:10,
        }

    </script>
</body>
</html>
